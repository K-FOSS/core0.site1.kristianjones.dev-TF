data_dir: alloc/data/vector/

api:
  enabled: true
  address: 0.0.0.0:[[ env "NOMAD_PORT_api" ]]
  playground: true 

sources:
  logs:
    type: syslog
    address: 0.0.0.0:[[ env "NOMAD_PORT_syslog" ]]
    mode: tcp

sinks:
  console:
    inputs:
      - logs
    type: console
    encoding:
      codec: json


  loki:
    inputs:
      - logs
    type: loki
    endpoint: http://ingressweb-http-cont.service.kjdev:8080
    encoding:
      codec: json
    remove_label_fields: true
    out_of_order_action: 'rewrite_timestamp'
    labels:
      host: '{{ host }}'
      severity: '{{ severity }}'
      timestamp: '{{ timestamp }}'
    healthcheck:
      enabled: false
    batch:
      max_bytes: 50000